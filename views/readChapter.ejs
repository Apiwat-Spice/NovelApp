
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>
        <%= novelName %> - Chapter <%= chapters.chapter_number%>
    </title>
    <style>
        body.light {
            background: #fff;
            color: #000;
        }

        body.dark {
            background: #121212;
            color: #e0e0e0;
        }

        body.sepia {
            background: #f4ecd8;
            color: #5b4636;
        }

        #controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        #content {
            line-height: 1.6;
            max-width: 700px;
            margin: auto;
        }

        .btn {
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }

        .btn-primary {
            background: #007bff;
            color: #fff;
        }

        .btn-secondary {
            background: #6c757d;
            color: #fff;
        }
    </style>
</head>

<body class="light">
    <header>
        <h1>
            <%= novelName %>
        </h1>
    </header>

    <div id="reader">
        <div id="controls">
            <a href="/read/<%= chapters.id %>" class="btn btn-primary">← Back</a>
            <button class="btn btn-secondary" onclick="changeFontSize(1)">A+</button>
            <button class="btn btn-secondary" onclick="changeFontSize(-1)">A-</button>
            <button class="btn btn-secondary" onclick="setTheme('light')">Light</button>
            <button class="btn btn-secondary" onclick="setTheme('dark')">Dark</button>
            <button class="btn btn-secondary" onclick="setTheme('sepia')">Sepia</button>
            <select id="fontSelect" onchange="changeFont(this.value)">
                <option value="serif">Serif</option>
                <option value="sans-serif">Sans-Serif</option>
                <option value="monospace">Monospace</option>
                <option value="Georgia">Georgia</option>
                <option value="Courier New">Courier New</option>
            </select>'
        </div>

            <h2>Chapter <%= chapters.chapter_number %>: <%=  %>
            </h2>

            <div id="content">
                <%= chapters.content %>
            </div>

            <div style="margin-top:20px; display:flex; justify-content:space-between;">
                <% if (prevChapter) { %>
                    <a href="/chapter/<%= prevChapter %>" class="btn btn-secondary">⬅ Previous</a>
                    <% } else { %>
                        <span></span>
                        <% } %>

                            <% if (nextChapter) { %>
                                <a href="/chapter/<%= nextChapter %>" class="btn btn-secondary">Next ➡</a>
                                <% } else { %>
                                    <span></span>
                                    <% } %>
            </div>
        </div>
    

        <script>
            let fontSize = 18;

            function changeFontSize(change) {
                fontSize += change;
                if (fontSize < 12) fontSize = 12;
                document.getElementById("content").style.fontSize = fontSize + "px";
                localStorage.setItem("fontSize", fontSize);
            }

            function setTheme(theme) {
                document.body.className = theme;
                localStorage.setItem("theme", theme);
            }

            window.onload = function () {
                const savedFont = localStorage.getItem("fontSize");
                const savedTheme = localStorage.getItem("theme");

                if (savedFont) {
                    fontSize = parseInt(savedFont);
                    document.getElementById("content").style.fontSize = fontSize + "px";
                }
                if (savedTheme) {
                    document.body.className = savedTheme;
                }
            }

            function changeFont() {
                currentFontIndex = (currentFontIndex + 1) % fontStyles.length;
                const newFont = fontStyles[currentFontIndex];
                document.getElementById("content").style.fontFamily = newFont;
                saveSetting("fontFamily", newFont);
            }
        </script>
</body>

</html>